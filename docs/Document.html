<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style><title>Document</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='cs305-computer-networks-project-http-file-manager'><span>CS305 Computer Networks Project: HTTP File Manager</span></h1><p><strong><span>Semester: 2023 Fall</span></strong></p><p><strong><span>Last Update: 2023/11/9</span></strong></p><p><strong><span>Submit deadline: 2023/12/xx</span></strong></p><h3 id='introduction'><span>Introduction</span></h3><p><strong><span>Hypertext Transfer Protocol</span></strong><span> (HTTP) is an application-layer protocol using transmission control protocol (TCP) designed for transmitting hypermedia data between web servers and browser. HTTP works as a request-response protocol between a client and server, the client first submits an HTTP request to the server, and the server should return a response to the client. HTTP/1.1 is designed as an enhancement of HTTP/1.0, with extensions of persistent connections,request methods, status codes and efficient header compression. The standard of HTTP/1.1 is defined in </span><a href='https://www.rfc-editor.org/rfc/rfc2616'><span>RFC 2616: HTTP/1.1</span></a><span>. For the later HTTP versions, HTTP/2 supports multiplexing and server push, then HTTP/3 uses Quick UDP Internet Connections (QUIC), a transport layer protocol developed by Google that uses UDP instead of TCP. You can learn HTTP further in </span><a href='https://developer.mozilla.org/en-US/docs/Web/HTTP'><span>HTTP|MDN Web Docs</span></a><span>.</span></p><h3 id='requirements'><span>Requirements</span></h3><p><span>In this project, you are required to construct a simple file manager server in </span><strong><span>Python</span></strong><span> based on characteristics of HTTP/1.1 that has ability to serve several clients with legitimate permissions to view, download, upload, delete files, etc. You should construct your own HTTP server framework using </span><a href='[socket — Low-level networking interface — Python 3.12.0 documentation](https://docs.python.org/3/library/socket.html)'><span>Socket</span></a><span> API, </span><strong><span>implement required service functions</span></strong><span> and </span><strong><span>map the HTTP requests to the corresponding functions</span></strong><span> on server correctly. Socket is an abstraction of the transport layer, it provides inter-process communication (IPC) by establishing named contact points between which the communication takes place. Basically you should implement the HTTP server based on </span><strong><span>TCP</span></strong><span> socket.</span></p><p><span>For each part of the HTTP server, </span><strong><span>the request interface of the corresponding functions have been specified</span></strong><span>. Your program should properly handle the requests from clients with valid response (status code, reason, headers and response body), return the status/error code correctly when client submits an invalid request or when exceptions occur, and </span><strong><span>cannot cause a crash when your server is running</span></strong><span>.</span></p><p><span>Since we will test your code only through the specified service interface  There is </span><strong><span>no framework code</span></strong><span> provided in this project, so you need to construct your own HTTP service framework using socket API. </span></p><h3 id='test'><strong><span>Test</span></strong></h3><p><span>For the tasks described in the following sections, we will briefly explain the requirements for testing the listing functions, and your code will be tested through accessing the corresponding HTTP service interface.</span></p><p><span>More explanations on specific testing scenarios and details will be provided in the test document, which will be released afterwards.</span></p><p>&nbsp;</p><p><strong><span>注意：</span></strong></p><p><span>每一部分最好找到相关的官方描述提供给学生</span></p><p><span>描述task：server给用户提供什么接口，用户通过这个接口访问服务时的数据格式：url format，query parameter，</span><strong><span>response format</span></strong><span>: format of necessary header，format of necessary body content</span></p><p><strong><span>代码来源说明</span></strong></p><p><strong><span>使用库的要求</span></strong><span>request, flask...</span></p><p><strong><span>如何判断抄袭</span></strong></p><p><strong><span>required headers</span></strong><span> in each interface</span></p><p><span>给出提问平台？</span></p><p>&nbsp;</p><h2 id='basic-part-80'><span>Basic Part (80%)</span></h2><p><span>In the basic part, you are required to the implement </span><strong><span>server side</span></strong><span> of the HTTP file manager, and provide interface for clients to view a directory, download files, upload files and delete files. To begin your project, you should firstly build your HTTP service framework to handle the received</span></p><p><span>You can get full marks of the basic part if your server can satisfy all requirements of the basic part and pass all test cases.</span></p><p>&nbsp;</p><h3 id='1-basic-http-server-15'><span>1. Basic HTTP Server (15%)</span></h3><p><span>In this part, you should use </span><code>socket</code><span> API to construct your own HTTP server to receive and handle the HTTP requests from clients.</span></p><p><span>To handle a HTTP request, you should transfer the </span><strong><span>binary data</span></strong><span> received by Socket into a </span><strong><span>HTTP request object</span></strong><span> so that server can figure out the content of each part of HTTP request. Then for valid requests, your server should return the binary data of HTTP response to clients, which correspond to the </span><strong><span>encapsulation</span></strong><span> and </span><strong><span>decapsulation</span></strong><span> of HTTP request and response.</span></p><p><span>The </span><strong><span>format and explanation of URL</span></strong><span> can be found in the lab slides </span><code>lab3_http.pdf</code><span>, or refer to </span><a href='https://developer.mozilla.org/en-US/docs/Learn/Common_questions/Web_mechanics/What_is_a_URL'><span>What is a URL? (mozilla.org)</span></a><span>.</span></p><p><span>An typical HTTP request and response have the following structure, and you should </span><strong><span>strictly follow this format</span></strong><span> when implementing your HTTP server.</span></p><p><img src="https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages/httpmsgstructure2.png" alt="Requests and responses share a common structure in HTTP" style="zoom: 67%;" /></p><p>&nbsp;</p><h4 id='request-method'><span>Request Method</span></h4><p><span>The request methods indicate different services that server provides to clients. The descriptions of request methods can be found in </span><a href='https://www.rfc-editor.org/rfc/rfc2616#section-5.1.1'><span>RFC 2616: HTTP/1.1#Section-5.1.1</span></a></p><p><span>For simplification, your HTTP server only needs to support the following request methods:</span></p><ul><li><strong><span>GET</span></strong><span>: The client requests specified resource, and server should response with the binary data of resource in response body.</span></li><li><strong><span>HEAD</span></strong><span>: Same as GET above except that the server will not include the binary data in body.</span></li><li><strong><span>POST</span></strong><span>: Submit data to server, with some potential side-effect</span></li></ul><p>&nbsp;</p><h4 id='headers'><span>(Headers)</span></h4><p><span>Descriptions of required headers?</span></p><p>&nbsp;</p><h4 id='response-status-code-and-reason-phrase'><strong><span>Response Status Code and Reason Phrase</span></strong></h4><p><span>The response status code is a 3-digit integer to show the status and of the request. And the corresponding reason phrase is intended to give a short textual description of the status code, which is more comprehensible for human users. This two values are included in the status line of the HTTP response message. You can refer to </span><a href='https://www.rfc-editor.org/rfc/rfc2616#section-6.1.1'><span>RFC 2616: HTTP/1.1#Section-6.1.1</span></a><span> for introduction of the status code and reason phrase in the status line of response.</span></p><p><span>You can refer to </span><a href='https://www.rfc-editor.org/rfc/rfc2616#section-10'><span>RFC 2616: HTTP/1.1#Section-10</span></a><span> for complete types of status codes and reason phrases with definitions. The following are some status codes that you may need to support in this project:</span></p><ul><li><p><strong><span>2xx</span></strong><span>: Success</span></p><ul><li><strong><span>200</span></strong><span> OK</span></li><li><strong><span>206</span></strong><span> Partial Content</span></li></ul></li><li><p><strong><span>3xx</span></strong><span>: Redirection</span></p><ul><li><strong><span>301</span></strong><span> Redirect</span></li></ul></li><li><p><strong><span>4xx</span></strong><span>: Client Error</span></p><ul><li><strong><span>400</span></strong><span> Bad Request</span></li><li><strong><span>401</span></strong><span> Unauthorized</span></li><li><strong><span>403</span></strong><span> Forbidden</span></li><li><strong><span>404</span></strong><span> Not Found</span></li><li><strong><span>405</span></strong><span> Method Not Allowed</span></li><li><strong><span>416</span></strong><span> Range Not Satisfiable</span></li></ul></li><li><p><strong><span>5xx</span></strong><span>: Server Error (要用吗？)</span></p><ul><li><strong><span>502</span></strong><span> Bad Gateway</span></li><li><strong><span>503</span></strong><span> Service Temporarily Unavailable</span></li></ul></li></ul><p><strong><span>The requirements of status code for different scenarios will be detailed in the following sections.</span></strong></p><p>&nbsp;</p><h4 id='11-persistent-connection-10'><span>1.1 Persistent Connection (10%)</span></h4><p><span>In HTTP/1.0, only short connection is the default connection model. While in HTTP/1.1, new connection models including </span><strong><span>persistent connection</span></strong><span> and pipelining are introduced. </span></p><p><img src="https://developer.mozilla.org/en-US/docs/Web/HTTP/Connection_management_in_HTTP_1.x/http1_x_connections.png" alt="Compares the performance of the three HTTP/1.x connection models: short-lived connections, persistent connections, and HTTP pipelining." style="zoom: 67%;" /></p><p><span>In HTTP/1.1, any connection are keep-alive, in other words, persistent. The connection will be maintained unless client or server actively close the connection, or receive a HTTP message with header </span><code>Connection: Close</code><span> and close the connection. The header </span><code>Connection</code><span>, introduced by </span><a href='https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Connection'><span>Connection - HTTP | MDN</span></a><span>, has the following values:</span></p><ul><li><code>Connection: Close</code><span> implies that server or client wants to close the connection, which is the default value of request in HTTP/1.0</span></li><li><code>Connection: Keep-Alive</code><span> implies that the client wants to keep the connection on. While persistent connection is the default connection in request of HTTP/1.1</span></li></ul><p><span>Each time when server receives a request from client, the server will build a TCP connection and try to </span><strong><span>reuse</span></strong><span> the connection to handle multiple requests </span><strong><span>sequentially</span></strong><span> from the same clients. The server </span><strong><span>should not close the connection</span></strong><span> until the received HTTP request has the header </span><code>Connection: Close</code><span> or the connection has been inactive for a certain period of time.</span></p><p><strong><span>Task</span></strong><span>: The server should handle the requests with persistent connection in default, with the </span><strong><span>ability to handle multiple requests sequentially in a single connection</span></strong><span>. And if the client sends request with </span><code>Connection: Close</code><span>, the server should </span><strong><span>close the current connection</span></strong><span> after finishing handling the request of received request.</span></p><p>&nbsp;</p><h4 id='12-authorization-5'><span>1.2 Authorization (5%)</span></h4><p><span>In this part, you don&#39;t necessarily provide services for registering or changing password, you are only required to implement </span><a href='https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#the_general_http_authentication_framework'><strong><span>HTTP Basic Authorization Scheme</span></strong></a><span> for user. And the authorization information of users includes username and password, which can be simply stored by server.</span></p><p><img src="Authorization.jpg" alt="A sequence diagram illustrating HTTP messages between a client and a server lifeline." style="zoom: 67%;" /></p><p><strong><span>Task</span></strong><span>: When the first time a client access the server without authorization, the server will response with </span><strong><span>401 Unauthorized</span></strong><span> with </span><code>WWW-Authenticated: Basic realm=&quot;Authorization Required&quot;</code><span> in header, asking user to provide authorization information.</span></p><ul><li><span>To provide authorization information, client should include the key-value pair </span><code>Authorization: Basic [EncodedInfo]</code><span> header of HTTP request message, where </span><strong><span>EncodedInfo</span></strong><span> is encoded from string </span><code>{username}:{password}</code><span> using </span><a href='https://developer.mozilla.org/en-US/docs/Glossary/Base64'><span>Base64 encoding</span></a><span>.</span></li><li><span>If user provides invalid authorization information, server should response with </span><strong><span>401 Unauthorized</span></strong><span>.</span></li><li><span>If user correctly provides the authorization information, server should response with status code </span><strong><span>2xx</span></strong><span>.</span></li><li><strong><span>The services of the following part all require authorization</span></strong><span>.</span></li></ul><p>&nbsp;</p><h3 id='2-view-and-download-20'><span>2. View and Download (20%?)</span></h3><p><span>In this part, you are required to implement a basic </span><strong><span>directory viewer</span></strong><span> and provide </span><strong><span>file download service</span></strong><span> for client. </span></p><p><span>On the server side, all the files will be stored in the directory </span><code>/data</code><span> </span><strong><span>under the root directory of your project</span></strong><span>. Each time a client send a request with URL corresponding to a valid path in the server, the server will reply with a </span><code>html</code><span> page showing the files and directories of the current path or the content of the corresponding file according to path in the server.</span></p><p><strong><span>Task</span></strong><span>: Providing a </span><strong><span>file-accessing service</span></strong><span> for client, so that a client can view the list of directory or download certain file by sending </span><strong><span>GET</span></strong><span> request to </span><code>http://localhost:8080/[access_path]</code><span>, where the </span><code>access_path</code><span> is the relative path under the </span><code>\data</code><span> folder in the root directory of your project. The corresponding headers including </span><code>Content-Type</code><span> and </span><code>Content-Length</code><span> should be correctly derived by the file. You can refer to </span><a href='https://www.iana.org/assignments/media-types/media-types.xhtml'><span>Media Types (iana.org)</span></a><span> for more details of Media Types.</span></p><p><span>The following are examples that client sends a </span><strong><span>correct</span></strong><span> request to server, when server is running on </span><code>localhost:8080</code><span>. In these cases, server should provide users with specified services correctly and return </span><strong><span>200 OK</span></strong><span>.</span></p><p><span>You can refer to the </span><strong><code>html</code><span> template</span></strong><span> by running </span><code>python -m http.server</code><span> on your computer and request to </span><code>http://localhost:[port]</code><span> on your browser.</span></p><ul><li><span>When a client wants to view the files under the directory </span><code>/data/11912113/</code><span>, it can directly send a HTTP request using </span><strong><span>GET</span></strong><span> method with URL </span><code>http://localhost:8080/11912113/</code><span> on your browser, then server will response with a </span><code>html</code><span> file showing file tree of the current directory as follows:</span><img src="File_list.png" referrerpolicy="no-referrer" alt="File_list"><span>where </span><code>/</code><span> and </span><code>../</code><span> refers to the root directory and above directory of the current. </span><code>123.png</code><span>, </span><code>abc.py</code><span>,</span><code>favicon.ico</code><span> are files and </span><code>666/</code><span> refers to a folder in the current directory.</span></li><li><span>Then if you click the URL of a file on the </span><code>html</code><span> page (e.g. </span><code>123.png</code><span> ) or enter the corresponding URL </span><code>http://localhost:8080/11912113/123.png</code><span> on your browser and send HTTP request with </span><strong><span>GET</span></strong><span> method to the server, the server will response with the binary content of the file </span><code>123.png</code><span>, and your browser will display the file directly (if the file type is supported for opening with the browser) or make a notification that you have downloaded the file.</span></li></ul><p><strong><span>Notice that</span></strong><span> your server should also handle the </span><strong><span>invalid requests</span></strong><span> from clients. Following are some invalid cases: </span></p><ul><li><span>If the format of the request URL or the query parameters are invalid, server should return </span><strong><span>400 Bad Request</span></strong><span>.</span></li><li><span>If the request URL does not exist in your server, server should return </span><strong><span>404 Not Found</span></strong><span> (html page?).</span></li><li><span>If the client access the file-getting interface with other methods instead of </span><strong><span>GET</span></strong><span> method, the server should return </span><strong><span>405 Method Not Allowed</span></strong><span>.</span></li></ul><p><span>这部分的测试</span></p><ul><li><span>提供一个html模板来接收server返回的file list，此时前端由我们提供，后端只需要返回用户请求路径的文件列表方便测试</span></li><li><span>不需要html，服务器只需要返回用户请求路径对应的文件列表，方便测试</span></li><li><span>上面二选一吧，否则不好测试，或者测试不测前端</span></li></ul><p>&nbsp;</p><h3 id='3-upload-and-delete-files-20'><span>3. Upload and Delete Files (20%)</span></h3><p><span>In this part, you are required to implement the </span><strong><span>uploading</span></strong><span> and </span><strong><span>deleting</span></strong><span> service with </span><strong><span>authorization</span></strong><span> and handle the requests from clients to upload or delete certain files. A typical file manager will provide service to multiple users at the same time, and keep their files safety from operations of other users. Thus </span><strong><span>each user only has permission to modify their own directory</span></strong><span>, and other operation are forbidden in the server.</span></p><p>&nbsp;</p><h4 id='31-upload-file-10'><span>3.1 Upload File (10%)</span></h4><p><span>Each user will have their own user directory named by their </span><strong><span>username</span></strong><span> on the path </span><code>/data/[username]/</code><span>. After signing in with user information to server, user can upload files to their own directory with authorization information. Besides, a user only has the operation permission under their own directory, uploading and deleting operations without authorization or permission should be forbidden by server. For invalid cases, server should return correct status code to users.</span></p><p><strong><span>Task</span></strong><span>: Implement a HTTP </span><strong><span>file uploading interface</span></strong><span> for client, so that a client can upload files by sending POST request to </span><code>http://localhost:8080/upload?path=/11912113/</code><span>. The query parameter </span><code>path=/11912113</code><span> determines the uploading directory </span><code>/data/11912113</code><span> under the root directory of the project, and the request body includes the binary file content. Then server should response to client with </span><strong><span>200 OK</span></strong></p><p><span>You should properly handle </span><strong><span>invalid</span></strong><span> requests like the following cases (for cases of user &quot;11912113&quot;):</span></p><ul><li><span>If there is no authorization information inside the HTTP request, or the authorization is invalid for server to accept, server should return </span><strong><span>401 Unauthorized</span></strong><span>.</span></li><li><span>If the authorization information is not the user &quot;11912113&quot;, this request is also </span><strong><span>invalid</span></strong><span> since there is no permission for other user to upload file to </span><code>/data/11912113/</code><span>, and server should return </span><strong><span>403 Forbidden</span></strong><span>.</span></li><li><span>If the target directory to upload file to does not exist in the server, the server should return </span><strong><span>404 Not Found</span></strong><span>.</span></li><li><span>If the client access the upload interface with other methods instead of </span><strong><span>POST</span></strong><span> method, the server should return </span><strong><span>405 Method Not Allowed</span></strong><span>.</span></li></ul><p>&nbsp;</p><h4 id='delete-file-10'><span>Delete File (10%)</span></h4><p><span>Same as file-uploading, each user can only delete files under their user directory </span><code>/data/[username]/</code><span>, other deleting request without authorization or permission should be forbidden by the server.</span></p><p><strong><span>Task</span></strong><span>: Implement a HTTP </span><strong><span>file deleting interface</span></strong><span> for client, so that a client can send a file deleting request using </span><strong><span>POST</span></strong><span> method with URL </span><code>http://localhost:8080/delete?path=/11912113/abc.py</code><span>. The query parameter </span><code>path=/11912113/abc.py</code><span> determines the file </span><code>/data/11912113/abc.py</code><span> under the root directory of the project will be deleted. In this case, server should return </span><strong><span>200 OK</span></strong><span>.</span></p><p><span>You should properly handle invalid requests like the following cases (also for the cases of user &quot;11912113&quot;):</span></p><ul><li><span>If there is no authorization information inside the HTTP request, or the authorization is invalid for server to accept, server should return </span><strong><span>401 Unauthorized</span></strong><span>.</span></li><li><span>If the authorization information is not the user &quot;11912113&quot;, this request is also </span><strong><span>invalid</span></strong><span> since there is no permission for other user to delete files in </span><code>/data/11912113/</code><span>, and server should return </span><strong><span>403 Forbidden</span></strong><span>.</span></li><li><span>If the target directory to upload file to does not exist in the server, the server should return </span><strong><span>404 Not Found</span></strong><span>.</span></li><li><span>If the client access the upload interface with other methods instead of </span><strong><span>POST</span></strong><span> method, the server should return </span><strong><span>405 Method Not Allowed</span></strong><span>.</span></li></ul><p><span>Cases of deleting with authorization are just like the cases of uploading with authorization above.</span></p><p><span>(How to test.)</span></p><p>&nbsp;</p><h3 id='4-cookies-and-session-10'><span>4. Cookies and Session (10%?)</span></h3><p><span>An </span><strong><span>HTTP cookie</span></strong><span> (web cookie, browser cookie) is a small piece of data that a server sends to a user&#39;s web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same user—keeping a user logged in, for example. It remembers stateful information for the stateless HTTP protocol.</span></p><p><span>In this part, you are require to provide a cookie </span><code>session-id</code><span> in response when user logs in for the first time. Then for the later request to the same website, the client (web browser) will include cookies in the request so that the server can figure out the authorization information by the received cookie and enable users to maintain login status.</span></p><p><strong><span>Task</span></strong><span>: When a client successfully logs in with username and password for the first time, the server will generate a </span><strong><span>unique</span></strong><span> </span><code>session-id</code><span> bound to the username, which will be stored by server and sent to client in the header </span><code>Set-Cookie</code><span> of response. The next time user can just request with received </span><code>session-id</code><span> in cookie, so that server can differentiate the user and authorize with </span><code>session-id</code><span>. Also this </span><code>session-id</code><span> will become </span><strong><span>expired if the user doesn&#39;t login again in a certain period of time</span></strong><span>. The user will be allowed to access the same website if the request has the cookie </span><code>session-id</code><span> under the expiration date, and the following operations will be same as description of aforementioned cases.</span></p><p><img src="cookie_and_session.jpg" alt="UML" style="zoom: 67%;" /></p><p><span>Notice that when client </span><strong><span>requests with expired or invalid cookie</span></strong><span>, it </span><strong><span>cannot pass the validation</span></strong><span>, and server should return </span><strong><span>401 Unauthorized</span></strong><span>.</span></p><p>&nbsp;</p><h3 id='5-chunked-transfer-5-保留吗'><span>5. Chunked Transfer (5%) (保留吗？)</span></h3><p><span>In this part, you are required to implement chunked transfer of HTTP.</span></p><p><span>Reference: </span><a href='https://www.rfc-editor.org/rfc/rfc9112#name-chunked-transfer-coding'><span>RFC 9112: HTTP/1.1 Chunked-transfer</span></a></p><p><span>Chunked transfer encoding is a streaming data transfer mechanism of HTTP/1.1. Instead of using header </span><code>Content-Length</code><span>, sender can the data in chunks, which is useful when the total size of the response may not be known until the request has been fully processed, such as transmitting dynamic content.</span></p><p><strong><span>Task</span></strong><span>: You should provide </span><strong><span>another file-accessing interface</span></strong><span> that when user send </span><strong><span>GET</span></strong><span> request to </span><code>http://localhost:8080/chunked?path=[request_path]</code><span>, use chunked encoding to transfer files, then the header in HTTP response </span><code>Transfer-Encoding: chunked</code><span> explains that this transmission is a chunk of the complete large file. Each chunk contains a chunk length at the start of the chunk with a </span><code>CRLF</code><span> and the corresponding chunk data with the other </span><code>CRLF</code><span>. Then a number zero with two following </span><code>CRLF</code><span> implie the </span><strong><span>end of the chunked transfer</span></strong><span>. Also, server should return </span><strong><span>200 OK</span></strong><span>. The structure of chunked transfer is shown below:</span></p><p><span>(briefly explain the structure and implementation of chunked transfer)</span></p><p><span>Body format:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(Begin)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/---[Chunk Length][CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">|----[Chunked Data][CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">|----[Chunk Length][CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">|----[Chunked Data][CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">|----......</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">|----[Chunk Length][CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">|----[Chunked Data][CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">|----0[CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> \---[CRLF]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(End)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><p>&nbsp;</p><h1 id='bonus-part'><span>Bonus Part</span></h1><h3 id='breakpoint-transmission-5'><span>Breakpoint Transmission (5%)</span></h3><p><span>HTTP/1.1 (RFC2616) starts to support obtain partial content of the file, which provides technical support for Parallel download and breakpoint continuation. It is implemented through two parameters, the </span><code>Range</code><span> header in HTTP request and </span><code>Content-Range</code><span> in HTTP response.</span></p><p><strong><span>Task</span></strong><span>: Support file random access with given </span><code>Range</code><span> header to obtain partial content of the file. This function should be </span><strong><span>implemented under the same interface as the basic part &quot;</span><a href='2. View and Download (20%?)'><span>2. View and Download</span></a><span>&quot;</span></strong><span>.</span></p><p><span>When the client sends </span><strong><span>GET</span></strong><span> request to server with </span><code>Range</code><span> header, the server should firstly validate the received range. If received bytes range is valid,  then response with the bytes content of the corresponding range, and include the header </span><code>Content-Range</code><span> in response correctly with 206 Partial Content.</span></p><p><strong><span>Request</span></strong><span>: Client (browser) tells the server which part of the content it wants to obtain. (e.g. </span><code>Range: bytes=0-1000</code><span>.)</span></p><ul><li><span>Examples of byte-ranges-specifier values from </span><a href='https://www.rfc-editor.org/rfc/rfc2616#section-14.35.1'><span>RFC 2616: HTTP/1.1#Section14.35.1</span></a><span> (assuming an entity-body of length 10000):</span>
<span>    - The first 500 bytes (byte offsets 0-499, inclusive):  </span><code>bytes=0-499</code>
<span>        - The second 500 bytes (byte offsets 500-999, inclusive): </span><code>bytes=500-999</code>
<span>        - The final 500 bytes (byte offsets 9500-9999, inclusive): </span><code>bytes=-500</code><span> or </span><code>bytes=9500-</code>
<span>        - The first and last bytes only (bytes 0 and 9999):  </span><code>bytes=0-0,-1</code>
<span>        - Several legal but not canonical specifications of the second 500 bytes (byte offsets 500-999, inclusive):</span>
<span>           </span><code>bytes=500-600,601-999</code><span> or </span><code>bytes=500-700,601-999</code></li></ul><p><strong><span>Response</span></strong><span>: Server return the partial content, and describe the range of the response coverage and the entire entity length. (e.g. </span><code>Content-Range: bytes 0-499/1234</code><span>.) Server should return </span><strong><span>206 Partial Content</span></strong><span> when handling the </span><strong><span>GET</span></strong><span> request with header </span><code>Range: bytes ***</code><span>.</span></p><ul><li><p><span>Examples of byte-content-range-spec values from </span><a href='https://www.rfc-editor.org/rfc/rfc2616#section-14.16'><span>RFC 2616: HTTP/1.1#Section14.16</span></a><span>, assuming that the entity contains a total of 1234 bytes:</span></p><ul><li><p><span>The first 500 bytes: </span><code>bytes 0-499/1234</code></p></li><li><p><span>The second 500 bytes: </span><code>bytes 500-999/1234</code></p><ul><li><span>All except for the first 500 bytes: </span><code>bytes 500-1233/1234</code></li><li><span>The last 500 bytes: </span><code>bytes 734-1233/1234</code></li></ul></li></ul></li></ul><p>&nbsp;</p><h3 id='encryption-5'><span>Encryption (5%)</span></h3><p><span>The above implementations are still plaintext transmission for all information, thus there exists risk of information leakage and tampering. To implement secure transmission, SSL/TLS is used to provide secure transmission. With asymmetric encryption, a client can first obtain public key from server, then sends data encrypted through the public key to server. Then server will use the private key to decrypt the data and continue to analyze the HTTP packet.</span></p><p><strong><span>Task</span></strong><span>: In this part, you don&#39;t need to completely implement the HTTPS. Instead, you need to implement a simple communication framework, with a </span><strong><span>symmetric encryption</span></strong><span> algorithm for efficient communication and an </span><strong><span>asymmetric encryption</span></strong><span> to initially negotiate the key of symmetric encryption. You can refer to the following steps:</span></p><ul><li><span>The client first request the </span><strong><span>public key of asymmetric encryption</span></strong><span> from the server</span></li><li><span>Client generates a </span><strong><span>key for symmetric encryption</span></strong></li><li><span>Client uses public key obtained from server to </span><strong><span>encrypt the public key</span></strong><span> and send to server</span></li><li><span>Server receives the encrypted key and use the server&#39;s own private key to decrypted the key</span></li><li><span>After the above negotiation process, server and client will use use symmetric encryption to encrypt the following communication with the negotiated key</span></li></ul><p><span>Therefore, what is different from aforementioned part is that, you need to implement </span><strong><span>both the server side and client side</span></strong><span>. Then, </span><strong><span>provide a simple scenario</span></strong><span> to show the security of the communication between server and clients.</span></p><p><span>You can also use other encrypted communication framework to improve the </span></p><p>&nbsp;</p><h3 id='speedtest-for-large-file-transmission-max-5'><span>SpeedTest for Large File Transmission (Max 5%)</span></h3><p><span>Chunked-transfer or breakpoint transmission</span></p><p><span>In this part, a speed test for large file transfer will be applied to test the performance of your HTTP server, including one-to-one transmission and one-to-many transmission. The size of file to be transferred is about </span></p><p><span>xxx to xxx. There are some testing scenarios?</span></p><p><span>How to mark?</span></p><h3 id='concurrency-max-5'><span>Concurrency (Max 5%)</span></h3><p><span>High concurrency is an important part of server. Typical servers should be able to handle a large amount of requests simultaneously. In this part, there are some testing cases with different levels of concurrency.</span></p><p><span>How to mark?</span></p><p><span>(需不需要删掉concurrency？把这个转为一个基本要求：支持多个client同时访问即可（threading）)</span></p><p>&nbsp;</p><h3 id='other--max-10'><span>Other  (Max 10%)</span></h3><p><span>Besides the above parts, you can also utilize the knowledge you learned to improve the service or performance of your HTTP server, including but not limited to implement you own &quot;HTTP&quot; based on other transport protocols rather than TCP, or modify the implementation of HTTP on the application layer. </span></p></div></div>
</body>
</html>